<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IA Ciega 0.9: include/ia_ciega.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generado por Doxygen 1.4.6-NO -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Página&nbsp;principal</span></a></li>
    <li><a href="modules.html"><span>Módulos</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Clases</span></a></li>
    <li id="current"><a href="files.html"><span>Archivos</span></a></li>
    <li><a href="pages.html"><span>Páginas&nbsp;relacionadas</span></a></li>
    <li><a href="examples.html"><span>Ejemplos</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>Lista&nbsp;de&nbsp;archivos</span></a></li>
    <li><a href="globals.html"><span>Archivos&nbsp;de&nbsp;los&nbsp;miembros</span></a></li>
  </ul></div>
<h1>include/ia_ciega.h</h1><a href="ia__ciega_8h.html">Ir a la documentación de este archivo.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef IA_ciega_H_roberto</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define IA_ciega_H_roberto</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00015"></a>00015 
<a name="l00018"></a>00018 <span class="comment">//#define IA_NO_CRONOMETRAR</span>
<a name="l00019"></a>00019 
<a name="l00022"></a>00022 <span class="comment">//#define IA_NO_ESTADISTICAS</span>
<a name="l00023"></a>00023 
<a name="l00026"></a>00026 <span class="comment">//#define IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;ctime&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00035"></a>00035 
<a name="l00038"></a>00038 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00039"></a><a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">00039</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION(ruta, estado) \</span>
<a name="l00040"></a>00040 <span class="preprocessor">                     if ( ! registrar_solucion || ! (*registrar_solucion)(ruta, estado) )</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">   #define IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION(ruta, estado) \</span>
<a name="l00043"></a>00043 <span class="preprocessor">                     ((void)0);</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="preprocessor">#ifndef IA_NO_CRONOMETRAR</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">   #include &lt;windows.h&gt;</span>
<a name="l00048"></a><a class="code" href="ia__ciega_8h.html#75123461572925fe75a7797d9930f1ff">00048</a> <span class="preprocessor">   #define IA_INICIO_CRONOMETRO ia::detalle::cronometro = GetTickCount();</span>
<a name="l00049"></a><a class="code" href="ia__ciega_8h.html#7069a221044d02e36ba170bb4d9f9f93">00049</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_FIN_CRONOMETRO ia::detalle::cronometro = GetTickCount() - ia::detalle::cronometro;</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">   #define IA_INICIO_CRONOMETRO ((void)0);</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">   #define IA_FIN_CRONOMETRO ((void)0);</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a>00055 <span class="preprocessor">#ifndef IA_NO_ESTADISTICAS</span>
<a name="l00056"></a><a class="code" href="ia__ciega_8h.html#66e81ab08112c2f3dc68fa6af14765f3">00056</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_SOLUCIONES detalle::conteo_soluciones ++;</span>
<a name="l00057"></a><a class="code" href="ia__ciega_8h.html#f5fc73a3321698af5ac603dad6b7b8ba">00057</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_EXPANDIDOS detalle::conteo_expandidos ++;</span>
<a name="l00058"></a><a class="code" href="ia__ciega_8h.html#6db07d249f26d7e95c401d3a811207e1">00058</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_VISITADOS detalle::conteo_visitados ++;</span>
<a name="l00059"></a><a class="code" href="ia__ciega_8h.html#d1f80335fab5b60630b49f6b22f03069">00059</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_PROFUNDIDAD_MAXIMA detalle::profundidad_maxima ++;</span>
<a name="l00060"></a><a class="code" href="ia__ciega_8h.html#8c710b96f42c498d9a8f839de66006ea">00060</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_ACTUALIZAR_PROFUNDIDAD_MAXIMA(X) \</span>
<a name="l00061"></a>00061 <span class="preprocessor">                                        if ( detalle::profundidad_maxima &lt; (X) ) detalle::profundidad_maxima = X;</span>
<a name="l00062"></a><a class="code" href="ia__ciega_8h.html#2ed87f010933dea8539d11d5b298021a">00062</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_REINICIAR_ESTADISTICAS detalle::reiniciar_estadisticas();   </span>
<a name="l00063"></a><a class="code" href="ia__ciega_8h.html#552aca858906c0b6acf6652d1eec7f0f">00063</a> <span class="preprocessor"></span><span class="preprocessor">   #define IA_REINICIAR_VISITADOS detalle::conteo_visitados = 0;</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_SOLUCIONES ((void)0);</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_EXPANDIDOS ((void)0);</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_VISITADOS ((void)0);</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">   #define IA_INCREMENTAR_PROFUNDIDAD_MAXIMA ((void)0);</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">   #define IA_ACTUALIZAR_PROFUNDIDAD_MAXIMA(X) ((void)0);</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">   #define IA_REINICIAR_ESTADISTICAS ((void)0);</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">   #define IA_REINICIAR_VISITADOS ((void)0);</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00073"></a>00073 <span class="preprocessor"></span>
<a name="l00076"></a><a class="code" href="namespaceia.html">00076</a> <span class="keyword">namespace </span>ia {
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="keyword">using namespace </span>std;   
<a name="l00079"></a>00079 
<a name="l00083"></a><a class="code" href="namespaceia_1_1detalle.html">00083</a> <span class="keyword">namespace </span>detalle {
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> conteo_visitados = 0;
<a name="l00086"></a>00086 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> conteo_expandidos = 0;
<a name="l00087"></a>00087 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> profundidad_maxima = 0;
<a name="l00088"></a>00088 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> conteo_soluciones = 0;
<a name="l00089"></a>00089 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> conteo_milisegundos = 0;
<a name="l00090"></a>00090 <span class="preprocessor">#ifndef IA_NO_CRONOMETRAR</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>   <span class="keyword">static</span> DWORD cronometro = 0;
<a name="l00092"></a>00092 <span class="preprocessor">#endif</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>   
<a name="l00094"></a><a class="code" href="namespaceia_1_1detalle.html#eb959eaf0956ad7e5e79e6e8a0ca4ceb">00094</a> <span class="keywordtype">void</span> <a class="code" href="namespaceia_1_1detalle.html#eb959eaf0956ad7e5e79e6e8a0ca4ceb">reiniciar_estadisticas</a>() {
<a name="l00095"></a>00095    detalle::conteo_visitados = 0;
<a name="l00096"></a>00096    detalle::conteo_expandidos = 0;
<a name="l00097"></a>00097    detalle::profundidad_maxima = 0;
<a name="l00098"></a>00098    detalle::conteo_soluciones = 0;
<a name="l00099"></a>00099 <span class="preprocessor">   #ifndef IA_NO_CRONOMETRAR</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>      detalle::cronometro = 0;
<a name="l00101"></a>00101 <span class="preprocessor">   #endif</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>}
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 }<span class="comment">// fin del namespace detalle</span>
<a name="l00105"></a>00105 
<a name="l00110"></a><a class="code" href="group__salida.html#g641d63b8b871dd3886aec1ddb3250563">00110</a> <span class="keywordtype">void</span> <a class="code" href="group__salida.html#g641d63b8b871dd3886aec1ddb3250563">mostrar_estadisticas</a>() {
<a name="l00111"></a>00111    <span class="keyword">using namespace </span>detalle;
<a name="l00112"></a>00112    cout &lt;&lt; <span class="stringliteral">"\nEstados distintos visitados: "</span> &lt;&lt; conteo_visitados;
<a name="l00113"></a>00113    cout &lt;&lt; <span class="stringliteral">"\nCantidad de expansiones realizadas: "</span> &lt;&lt; conteo_expandidos;
<a name="l00114"></a>00114    cout &lt;&lt; <span class="stringliteral">"\nProfundidad máxima alcanzada: "</span> &lt;&lt; profundidad_maxima;
<a name="l00115"></a>00115    cout &lt;&lt; <span class="stringliteral">"\nCantidad de soluciones halladas: "</span> &lt;&lt; conteo_soluciones;
<a name="l00116"></a>00116 <span class="preprocessor">   #ifndef IA_NO_CRONOMETRAR</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>      cout &lt;&lt; <span class="stringliteral">"\nMilisegundos transcurridos: "</span> &lt;&lt; cronometro;
<a name="l00118"></a>00118 <span class="preprocessor">   #endif</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>   cout &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00120"></a>00120 }
<a name="l00121"></a>00121 
<a name="l00129"></a>00129 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00130"></a><a class="code" href="group__salida.html#g25dbda0de5763d83f28ebfb20a885f3e">00130</a> <span class="keywordtype">void</span> <a class="code" href="group__salida.html#g25dbda0de5763d83f28ebfb20a885f3e">mostrar_solucion</a>( <span class="keyword">const</span> Estado_t&amp; inicial, <span class="keyword">const</span> Operaciones_t&amp; solucion ) {
<a name="l00131"></a>00131    <span class="keywordflow">if</span> ( solucion.empty() )
<a name="l00132"></a>00132       cout &lt;&lt; <span class="stringliteral">"\nLa solución dada está vacía\n"</span>;
<a name="l00133"></a>00133    <span class="keywordflow">else</span> {
<a name="l00134"></a>00134       Estado_t actual(inicial), anterior;
<a name="l00135"></a>00135       cout &lt;&lt; <span class="stringliteral">"\nLa solucion consta de "</span> &lt;&lt; solucion.size() &lt;&lt; <span class="stringliteral">" operaciones:\n"</span>
<a name="l00136"></a>00136              &lt;&lt; <span class="stringliteral">"Estado inicial: "</span> &lt;&lt; actual &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00137"></a>00137       <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator paso = solucion.begin(); paso != solucion.end()
<a name="l00138"></a>00138                                                                                                      ; ++ paso) {
<a name="l00139"></a>00139          anterior = actual;
<a name="l00140"></a>00140          (*(*paso))( anterior, actual );
<a name="l00141"></a>00141          cout &lt;&lt; <span class="stringliteral">"***"</span> &lt;&lt;(*paso)-&gt;get_descripcion() &lt;&lt; <span class="stringliteral">"\t --- "</span> &lt;&lt; actual &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00142"></a>00142       }
<a name="l00143"></a>00143    }
<a name="l00144"></a>00144 }
<a name="l00145"></a>00145 
<a name="l00151"></a>00151 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00152"></a><a class="code" href="group__salida.html#g17533d6fa796559e64faec2e6738b24d">00152</a> <span class="keywordtype">void</span> <a class="code" href="group__salida.html#g25dbda0de5763d83f28ebfb20a885f3e">mostrar_solucion</a>( <span class="keyword">const</span> Operaciones_t&amp; solucion ) {
<a name="l00153"></a>00153    <span class="keywordflow">if</span> ( solucion.empty() )
<a name="l00154"></a>00154       cout &lt;&lt; <span class="stringliteral">"\nLa solución dada está vacía.\n"</span>;
<a name="l00155"></a>00155    <span class="keywordflow">else</span> {
<a name="l00156"></a>00156       cout &lt;&lt; <span class="stringliteral">"\nLa solucion consta de "</span> &lt;&lt; solucion.size() &lt;&lt; <span class="stringliteral">" operaciones:\n"</span>;
<a name="l00157"></a>00157       <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator paso = solucion.begin(); paso != solucion.end()
<a name="l00158"></a>00158                                                                                                      ; ++ paso) 
<a name="l00159"></a>00159          cout &lt;&lt; (*paso)-&gt;get_descripcion() &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00160"></a>00160    }
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00171"></a>00171 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t, <span class="keyword">typename</span> NombreOperador_t&gt;
<a name="l00172"></a><a class="code" href="group__salida.html#gada5c46624e616069191a1c033c11733">00172</a> <span class="keywordtype">void</span> <a class="code" href="group__salida.html#g25dbda0de5763d83f28ebfb20a885f3e">mostrar_solucion</a>( <span class="keyword">const</span> Estado_t&amp; inicial, <span class="keyword">const</span> Operaciones_t&amp; solucion
<a name="l00173"></a>00173                                 , <span class="keyword">const</span> NombreOperador_t&amp; nombre_operadores ) {
<a name="l00174"></a>00174    <span class="keywordflow">if</span> ( solucion.empty() )
<a name="l00175"></a>00175       cout &lt;&lt; <span class="stringliteral">"\nLa solución dada está vacía\n"</span>;
<a name="l00176"></a>00176    <span class="keywordflow">else</span> {
<a name="l00177"></a>00177       Estado_t actual(inicial), anterior;
<a name="l00178"></a>00178       cout &lt;&lt; <span class="stringliteral">"\nLa solucion consta de "</span> &lt;&lt; solucion.size() &lt;&lt; <span class="stringliteral">" operaciones:\n"</span>
<a name="l00179"></a>00179              &lt;&lt; <span class="stringliteral">"Estado inicial: "</span> &lt;&lt; actual &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00180"></a>00180       <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator paso = solucion.begin(); paso != solucion.end()
<a name="l00181"></a>00181                                                                                                      ; ++ paso) {
<a name="l00182"></a>00182          anterior = actual;
<a name="l00183"></a>00183          (*(*paso))( anterior, actual );
<a name="l00184"></a>00184          <span class="keywordflow">if</span> ( nombre_operadores.find(*paso) != nombre_operadores.end() )
<a name="l00185"></a>00185             cout &lt;&lt; <span class="stringliteral">"***"</span> &lt;&lt;nombre_operadores.find(*paso)-&gt;second &lt;&lt; <span class="stringliteral">"\t --- "</span> &lt;&lt; actual &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00186"></a>00186          <span class="keywordflow">else</span>
<a name="l00187"></a>00187             cout &lt;&lt; <span class="stringliteral">"***(Nombre de operador desconocido)"</span> &lt;&lt; <span class="stringliteral">"\t --- "</span> &lt;&lt; actual &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00188"></a>00188       }
<a name="l00189"></a>00189    }
<a name="l00190"></a>00190 }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 
<a name="l00195"></a>00195 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00196"></a><a class="code" href="group__salida.html#ge76db04e2644a8e385c545148b3209b7">00196</a> <span class="keywordtype">void</span> <a class="code" href="group__salida.html#ge76db04e2644a8e385c545148b3209b7">mostrar_estado_solucion</a>( <span class="keyword">const</span> Estado_t&amp; inicial, <span class="keyword">const</span> Operaciones_t&amp; solucion ) {
<a name="l00197"></a>00197    Estado_t actual(inicial), anterior;
<a name="l00198"></a>00198    <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator paso = solucion.begin(); paso != solucion.end()
<a name="l00199"></a>00199                                                                                                   ; ++ paso) {
<a name="l00200"></a>00200       anterior = actual;
<a name="l00201"></a>00201       (*(*paso))(anterior,actual);
<a name="l00202"></a>00202    }
<a name="l00203"></a>00203    cout &lt;&lt; <span class="stringliteral">"La solucion consta de "</span> &lt;&lt; solucion.size() &lt;&lt; <span class="stringliteral">"operaciones, el estado resultante es: "</span> 
<a name="l00204"></a>00204           &lt;&lt; actual &lt;&lt; <span class="stringliteral">"\n"</span>;
<a name="l00205"></a>00205 }
<a name="l00206"></a>00206 
<a name="l00212"></a>00212 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t&gt;
<a name="l00213"></a><a class="code" href="structia_1_1_operacion.html">00213</a> <span class="keyword">struct </span><a class="code" href="structia_1_1_operacion.html">Operacion</a> {
<a name="l00214"></a><a class="code" href="structia_1_1_operacion.html#1982efb1854ce03dd6cb6b3de9abde74">00214</a>    <a class="code" href="structia_1_1_operacion.html">Operacion</a>( <span class="keyword">const</span> string&amp; nombre_ = string() ) : nombre(nombre_) {}
<a name="l00218"></a>00218    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> Estado_t&amp; antes, Estado_t&amp; despues) <span class="keyword">const </span>= 0;
<a name="l00219"></a><a class="code" href="structia_1_1_operacion.html#a16c0fac20dce61f0b472e08fc18ecbd">00219</a>    <span class="keyword">virtual</span> string&amp; get_descripcion() {
<a name="l00220"></a>00220       <span class="keywordflow">return</span> nombre;
<a name="l00221"></a>00221    }
<a name="l00222"></a><a class="code" href="structia_1_1_operacion.html#0ca79e5bd54fad0799b05697b1319270">00222</a>    string nombre;
<a name="l00223"></a>00223 };
<a name="l00224"></a>00224 
<a name="l00227"></a>00227 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t &gt;
<a name="l00228"></a><a class="code" href="structia_1_1_operaciones.html">00228</a> <span class="keyword">struct </span><a class="code" href="structia_1_1_operaciones.html">Operaciones</a> : <span class="keyword">public</span> vector&lt; bool(*)(const Estado_t&amp;, Estado_t&amp;) &gt; {
<a name="l00229"></a>00229 };
<a name="l00230"></a>00230 
<a name="l00234"></a>00234 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t&gt; 
<a name="l00235"></a><a class="code" href="structia_1_1_nombres_operadores.html">00235</a> <span class="keyword">struct </span><a class="code" href="structia_1_1_nombres_operadores.html">NombresOperadores</a> : <span class="keyword">public</span> map&lt; bool(*)(const Estado_t&amp;, Estado_t&amp;), string &gt; {
<a name="l00236"></a>00236 };
<a name="l00237"></a>00237 
<a name="l00240"></a>00240 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00241"></a><a class="code" href="structia_1_1_operadores_inversos.html">00241</a> <span class="keyword">struct </span><a class="code" href="structia_1_1_operadores_inversos.html">OperadoresInversos</a> : <span class="keyword">public</span> map&lt; typename Operaciones_t::value_type
<a name="l00242"></a>00242                                                        , typename Operaciones_t::value_type &gt; {
<a name="l00248"></a><a class="code" href="structia_1_1_operadores_inversos.html#d504dca40326ee82e5e1abee8dce732c">00248</a>    <a class="code" href="structia_1_1_operadores_inversos.html">OperadoresInversos&lt;Operaciones_t&gt;</a>&amp; complementar(){
<a name="l00249"></a>00249       <span class="keyword">typedef</span> map&lt; <span class="keyword">typename</span> Operaciones_t::value_type
<a name="l00250"></a>00250                          , <span class="keyword">typename</span> Operaciones_t::value_type &gt; mapa_padre;
<a name="l00251"></a>00251       map&lt; typename Operaciones_t::value_type, typename Operaciones_t::value_type &gt; complemento;
<a name="l00252"></a>00252       <span class="keywordflow">for</span>( <span class="keyword">typename</span> mapa_padre::const_iterator it = this-&gt;begin(); it != this-&gt;end(); ++ it )
<a name="l00253"></a>00253          complemento.insert( make_pair( it-&gt;second, it-&gt;first ) );
<a name="l00254"></a>00254       copy( complemento.begin(), complemento.end(), inserter( *<span class="keyword">this</span>, this-&gt;begin() ) );
<a name="l00255"></a>00255       <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00256"></a>00256    }
<a name="l00257"></a>00257 };
<a name="l00258"></a>00258 
<a name="l00266"></a>00266 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t &gt;
<a name="l00267"></a><a class="code" href="classia_1_1_secuencia_estados.html">00267</a> <span class="keyword">class </span><a class="code" href="classia_1_1_secuencia_estados.html">SecuenciaEstados</a> {
<a name="l00268"></a>00268    <span class="keyword">typedef</span> vector&lt; typename Operaciones_t::value_type &gt; Ruta_t;
<a name="l00269"></a>00269    <span class="keyword">const</span> Ruta_t&amp; operaciones;
<a name="l00270"></a>00270    Estado_t inicial;
<a name="l00271"></a>00271 <span class="keyword">public</span>:
<a name="l00272"></a><a class="code" href="classia_1_1_secuencia_estados.html#832159c833d8c34cdf721456a92b69ff">00272</a>    <a class="code" href="classia_1_1_secuencia_estados.html">SecuenciaEstados</a>( <span class="keyword">const</span> Estado_t&amp; inicial_
<a name="l00273"></a>00273                              , <span class="keyword">const</span> vector&lt; typename Operaciones_t::value_type &gt;&amp; operaciones_ ) 
<a name="l00274"></a>00274             : inicial( inicial_ ), operaciones( operaciones_ ) {}
<a name="l00275"></a><a class="code" href="classia_1_1_secuencia_estados.html#67171474c4da6cc8efe0c7fafefd2b2d">00275</a>    <span class="keyword">class </span><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>;
<a name="l00276"></a>00276    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>;
<a name="l00279"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">00279</a>    <span class="keyword">class </span><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>  : <span class="keyword">public</span> std::<a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>&lt; std::forward_iterator_tag, const Estado_t, ptrdiff_t &gt; {
<a name="l00280"></a>00280       <span class="keyword">typename</span> Ruta_t::const_iterator it;
<a name="l00281"></a>00281       Estado_t estado_actual;
<a name="l00282"></a>00282    <span class="keyword">public</span>:
<a name="l00283"></a>00283       <span class="comment">// Para generar el iterador al principio, es el utilizado por el método begin() de su clase exterior (outer class)</span>
<a name="l00284"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#07dddbdbca1f95b14093b0613bfb744c">00284</a>       <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>(Estado_t&amp; inicial_, <span class="keyword">const</span> Ruta_t&amp; operaciones_) : it(operaciones_.begin()) { 
<a name="l00285"></a>00285          estado_actual = inicial_; 
<a name="l00286"></a>00286       }
<a name="l00287"></a>00287       <span class="comment">// Para generar el iterador al final, es el utilizado por el método end() de su clase exterior (outer class)</span>
<a name="l00288"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#5bb0c44874f3005c7e4043a6ac1a5e2d">00288</a>       <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>(<span class="keyword">const</span> Ruta_t&amp; operaciones_) : it(operaciones_.end() ) {
<a name="l00289"></a>00289       }
<a name="l00290"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#be4fda2ddcf305ccc675b5ffd18a2f87">00290</a>       <span class="keywordtype">bool</span> operator==( <span class="keyword">const</span> <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>&amp; x )<span class="keyword"> const </span>{
<a name="l00291"></a>00291          <span class="keywordflow">return</span> it == x.<a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#d74891b1c051acf046becdf64b364597">it</a>;
<a name="l00292"></a>00292       }
<a name="l00293"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#f91025fa196ec76aecfee26cab452f6e">00293</a>       <span class="keywordtype">bool</span> operator!=( <span class="keyword">const</span> <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>&amp; x )<span class="keyword"> const </span>{
<a name="l00294"></a>00294          <span class="keywordflow">return</span> !( *<span class="keyword">this</span> == x );
<a name="l00295"></a>00295       }
<a name="l00296"></a>00296       <span class="comment">// Dereferenciar a este iterador devuelve el estado actual</span>
<a name="l00297"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#0e76a4acdee85b975ce539ad200011bc">00297</a>       Estado_t operator*()<span class="keyword"> const </span>{
<a name="l00298"></a>00298          <span class="keywordflow">return</span> estado_actual;
<a name="l00299"></a>00299       }
<a name="l00300"></a>00300       <span class="comment">// Avanzar este iterador aplica la operación que corresponde al estado actual, de acuerdo a la secuencia de operaciones</span>
<a name="l00301"></a>00301       <span class="comment">// dada en el constructor de su outer class. Este es el operador de pre-incremento (++it), prefieralo.</span>
<a name="l00302"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#9421c5cd6a8ed4fba620fefc6a3fc204">00302</a>       <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>&amp; operator++() {
<a name="l00303"></a>00303          Estado_t nuevo;
<a name="l00304"></a>00304          <span class="keywordtype">bool</span> hecho = (*(*it))(estado_actual, nuevo);
<a name="l00305"></a>00305          assert( hecho );
<a name="l00306"></a>00306          estado_actual = nuevo;
<a name="l00307"></a>00307          ++ it;
<a name="l00308"></a>00308          <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00309"></a>00309       }
<a name="l00310"></a>00310       <span class="comment">// Avanzar este iterador, sirve para lo mismo que el operador de pre-incremento. Este es el operador de pos-incremento</span>
<a name="l00311"></a>00311       <span class="comment">// (it++) y no se recomienda su uso a menos que utilice el iterador devuelto por este método (lo mismo que se recomienda </span>
<a name="l00312"></a>00312       <span class="comment">// con cualquier pos-incremento/decremento )</span>
<a name="l00313"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#af44bb4cafa3975504263b1965efcd2c">00313</a>       <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a> operator++(<span class="keywordtype">int</span>) {
<a name="l00314"></a>00314          <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a> tmp=*<span class="keyword">this</span>;
<a name="l00315"></a>00315          ++*<span class="keyword">this</span>;
<a name="l00316"></a>00316          <span class="keywordflow">return</span> tmp;
<a name="l00317"></a>00317       }
<a name="l00318"></a>00318       <span class="comment">// Retroceder el iterador, &lt;i&gt;no tiene ningun efecto&lt;/i&gt;</span>
<a name="l00319"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#3e71022a5a14bb786895281883026a7d">00319</a>       <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>&amp; operator--() {
<a name="l00320"></a>00320          <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00321"></a>00321       }
<a name="l00322"></a>00322       <span class="comment">// Retroceder el iterador, &lt;i&gt;no tiene ningun efecto&lt;/i&gt;</span>
<a name="l00323"></a><a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html#279d88f7b3ed79d5013f1c417bea96d3">00323</a>       <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a> operator--(<span class="keywordtype">int</span>) {
<a name="l00324"></a>00324          <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00325"></a>00325       }
<a name="l00326"></a>00326    };
<a name="l00327"></a>00327 
<a name="l00328"></a>00328    <span class="comment">// Crea el iterador que empieza con el estado inicial dado y que aplicará las operaciones dadas</span>
<a name="l00329"></a><a class="code" href="classia_1_1_secuencia_estados.html#0fd19407efe5702308ded6cdf2333683">00329</a>    <span class="keyword">const</span> <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a> begin() {
<a name="l00330"></a>00330       <span class="keywordflow">return</span> <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>( inicial, operaciones );
<a name="l00331"></a>00331    }
<a name="l00332"></a>00332    <span class="comment">// Comparado (con ==) con otro iterador de esta misma clase &lt;i&gt;y construido con la misma secuencia de operaciones&lt;/i&gt; </span>
<a name="l00333"></a>00333    <span class="comment">// devuelve true ssi ya no hay más operaciones por aplicar</span>
<a name="l00334"></a><a class="code" href="classia_1_1_secuencia_estados.html#b6486827c74febb609e883c80a5be8ce">00334</a>    <span class="keyword">const</span> <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a> end() {
<a name="l00335"></a>00335       <span class="keywordflow">return</span> <a class="code" href="classia_1_1_secuencia_estados_1_1iterator.html">iterator</a>( operaciones );
<a name="l00336"></a>00336    }
<a name="l00337"></a>00337    <span class="comment">// Devuelve la cantidad de operaciones dadas en el constructor</span>
<a name="l00338"></a><a class="code" href="classia_1_1_secuencia_estados.html#65a109b78470fad1a6ddaa3912a0d354">00338</a>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size() { 
<a name="l00339"></a>00339       <span class="keywordflow">return</span> operaciones.size(); 
<a name="l00340"></a>00340    }
<a name="l00341"></a>00341 };
<a name="l00342"></a>00342 
<a name="l00347"></a>00347 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00348"></a>00348 vector&lt;typename Operaciones_t::value_type&gt; 
<a name="l00349"></a><a class="code" href="namespaceia.html#4a68a7ab04b3254c2db2bd160bf6aadf">00349</a> <a class="code" href="namespaceia.html#4a68a7ab04b3254c2db2bd160bf6aadf">simplificar_bidireccional</a>( <span class="keyword">const</span> pair&lt; vector&lt;typename Operaciones_t::value_type&gt;
<a name="l00350"></a>00350                                 , vector&lt;typename Operaciones_t::value_type&gt; &gt;&amp; solucion
<a name="l00351"></a>00351                                 , <span class="keyword">const</span> <a class="code" href="structia_1_1_operadores_inversos.html">OperadoresInversos&lt;Operaciones_t&gt;</a>&amp; inversos) {
<a name="l00352"></a>00352    vector&lt;typename Operaciones_t::value_type&gt; respuesta( solucion.first );
<a name="l00353"></a>00353    <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_reverse_iterator it_operacion = solucion.second.rbegin()
<a name="l00354"></a>00354                                              ; it_operacion != solucion.second.rend(); ++ it_operacion )
<a name="l00355"></a>00355       respuesta.push_back( inversos.find( *it_operacion)-&gt;second  );
<a name="l00356"></a>00356    <span class="keywordflow">return</span> respuesta;
<a name="l00357"></a>00357 }
<a name="l00358"></a>00358 
<a name="l00359"></a>00359 <span class="comment">// Las funciones y estructuras de datos que estan en el namespace detalle no deben ser usadas directamente. </span>
<a name="l00360"></a>00360 <span class="comment">// Use el namespace ia solamente</span>
<a name="l00361"></a>00361 <span class="keyword">namespace </span>detalle {
<a name="l00362"></a>00362 
<a name="l00365"></a>00365 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt; 
<a name="l00366"></a><a class="code" href="structia_1_1detalle_1_1_estado_y_ruta.html">00366</a> <span class="keyword">struct </span><a class="code" href="structia_1_1detalle_1_1_estado_y_ruta.html">EstadoYRuta</a>: <span class="keyword">public</span> vector&lt;pair&lt; Estado_t, vector&lt; typename Operaciones_t::value_type&gt; &gt; &gt; {
<a name="l00367"></a>00367 };
<a name="l00368"></a>00368 
<a name="l00374"></a>00374 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00375"></a><a class="code" href="group__detalle__implementacion.html#g146585979cd3482b56bb8ed8aadcdcd7">00375</a> vector&lt;typename Operaciones_t::value_type&gt; <a class="code" href="group__detalle__implementacion.html#g146585979cd3482b56bb8ed8aadcdcd7">preferencia_amplitud</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones 
<a name="l00376"></a>00376                            , <a class="code" href="structia_1_1detalle_1_1_estado_y_ruta.html">detalle::EstadoYRuta&lt;Estado_t, Operaciones_t&gt;</a>&amp; expansibles
<a name="l00377"></a>00377 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00378"></a>00378                            , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp; 
<a name="l00379"></a>00379                                                                 ,<span class="keyword">const</span> Estado_t&amp;)
<a name="l00380"></a>00380 #endif
<a name="l00381"></a>00381                          ){
<a name="l00382"></a>00382    set&lt;Estado_t&gt; visitados;
<a name="l00383"></a>00383    <a class="code" href="structia_1_1detalle_1_1_estado_y_ruta.html">detalle::EstadoYRuta&lt;Estado_t, Operaciones_t&gt;</a> nuevos;
<a name="l00384"></a>00384    <span class="comment">// 'resultante' es el nodo recien descubierto al aplicar una operacion</span>
<a name="l00385"></a>00385    <span class="keyword">typedef</span> set&lt;Estado_t&gt; Visitados_t;
<a name="l00386"></a>00386    <span class="comment">// auxiliar que nos sirve para saber si un estado generado ya se lo había visitado antes</span>
<a name="l00387"></a>00387    pair&lt; typename Visitados_t::iterator, bool &gt; insertado;
<a name="l00388"></a>00388    <span class="keywordflow">while</span> ( ! expansibles.empty() ) {
<a name="l00389"></a>00389       <a class="code" href="ia__ciega_8h.html#d1f80335fab5b60630b49f6b22f03069">IA_INCREMENTAR_PROFUNDIDAD_MAXIMA</a>;
<a name="l00390"></a>00390       <span class="keywordflow">for</span>( <span class="keyword">typename</span> <a class="code" href="structia_1_1detalle_1_1_estado_y_ruta.html">detalle::EstadoYRuta&lt;Estado_t, Operaciones_t&gt;::iterator</a> estado 
<a name="l00391"></a>00391                                                                                          =expansibles.begin()
<a name="l00392"></a>00392                                                     ; estado != expansibles.end(); ++ estado ) {
<a name="l00393"></a>00393          <span class="comment">// Aplicar todas las operaciones posibles, poniendo los nuevos nodos en 'nuevos'</span>
<a name="l00394"></a>00394          <a class="code" href="ia__ciega_8h.html#f5fc73a3321698af5ac603dad6b7b8ba">IA_INCREMENTAR_EXPANDIDOS</a>;
<a name="l00395"></a>00395          <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator operacion = operaciones.begin()
<a name="l00396"></a>00396                                              ; operacion != operaciones.end(); ++ operacion ) {
<a name="l00397"></a>00397             Estado_t resultante;
<a name="l00398"></a>00398             <span class="keywordflow">if</span> ( ! (*(*operacion))(estado-&gt;first, resultante) )
<a name="l00399"></a>00399                <span class="keywordflow">continue</span>; <span class="comment">// Si no se puede aplicar la operacion, intentamos la siguiente</span>
<a name="l00400"></a>00400             insertado = visitados.insert( resultante );
<a name="l00401"></a>00401             <span class="keywordflow">if</span> ( ! insertado.second )
<a name="l00402"></a>00402                <span class="keywordflow">continue</span>; <span class="comment">// si el recien descubierto ya había sido visitado, pasamos a la siguiente operacion</span>
<a name="l00403"></a>00403             <a class="code" href="ia__ciega_8h.html#6db07d249f26d7e95c401d3a811207e1">IA_INCREMENTAR_VISITADOS</a>;
<a name="l00404"></a>00404             <span class="comment">// colocamos en nuevos al recien descubierto, asociando la misma ruta que su nodo padre...</span>
<a name="l00405"></a>00405             nuevos.push_back( make_pair(resultante, estado-&gt;second) );
<a name="l00406"></a>00406             <span class="comment">// ... y le aumentamos a su ruta la operación que acabamos de realizar</span>
<a name="l00407"></a>00407             nuevos.back().second.push_back( *operacion );
<a name="l00408"></a>00408             <span class="keywordflow">if</span> ( resultante.es_meta() ) { <span class="comment">// si se encontró un estado meta...</span>
<a name="l00409"></a>00409                <a class="code" href="ia__ciega_8h.html#66e81ab08112c2f3dc68fa6af14765f3">IA_INCREMENTAR_SOLUCIONES</a>;
<a name="l00410"></a>00410                <span class="comment">// devolvemos la ruta a no ser que el callback registrar_solucion nos pida continuar la búsqueda</span>
<a name="l00411"></a>00411                <a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION</a>(nuevos.back().second, nuevos.back().first)
<a name="l00412"></a>00412                   <span class="keywordflow">return</span> nuevos.back().second; 
<a name="l00413"></a>00413             }
<a name="l00414"></a>00414          }
<a name="l00415"></a>00415       }
<a name="l00416"></a>00416       <span class="comment">// equivale a: expansibles = nuevos; nuevos.clear(), vea las detalles de implementacion</span>
<a name="l00417"></a>00417       expansibles.swap( nuevos );  nuevos.clear();
<a name="l00418"></a>00418    }
<a name="l00419"></a>00419    <span class="comment">// al finalizar toda la busqueda devolvemos una solucion vacia.</span>
<a name="l00420"></a>00420    <span class="keywordflow">return</span> vector&lt;typename Operaciones_t::value_type&gt;();
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00432"></a>00432 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t, <span class="keyword">typename</span> Ruta_t&gt;
<a name="l00433"></a><a class="code" href="group__detalle__implementacion.html#ga81bb2a346107cbfe5debe839f71e5d8">00433</a> Ruta_t <a class="code" href="group__detalle__implementacion.html#ga81bb2a346107cbfe5debe839f71e5d8">preferencia_profundidad</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00434"></a>00434                , set&lt;Estado_t&gt;&amp; visitados, Ruta_t&amp; ruta
<a name="l00435"></a>00435                , <span class="keyword">const</span> Estado_t&amp; actual
<a name="l00436"></a>00436 #ifndef IA_NO_ESTADISTICAS
<a name="l00437"></a>00437                , <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> profundidad <span class="comment">// la profundidad actual solo se usa para obtener estadísticas</span>
<a name="l00438"></a>00438 #endif
<a name="l00439"></a>00439                , <span class="keywordtype">bool</span>&amp; finalizar
<a name="l00440"></a>00440 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00441"></a>00441                , <span class="keywordtype">bool</span>(*registrar_solucion)(<span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp;
<a name="l00442"></a>00442                                                     ,<span class="keyword">const</span> Estado_t&amp; ) 
<a name="l00443"></a>00443 #endif
<a name="l00444"></a>00444                ){
<a name="l00445"></a>00445    <span class="keyword">typedef</span> set&lt;Estado_t&gt; Visitados_t;
<a name="l00446"></a>00446    
<a name="l00447"></a>00447    <span class="keywordflow">if</span> ( actual.es_meta() ) { <span class="comment">// Si se encontró un estado meta</span>
<a name="l00448"></a>00448       <a class="code" href="ia__ciega_8h.html#66e81ab08112c2f3dc68fa6af14765f3">IA_INCREMENTAR_SOLUCIONES</a>;
<a name="l00449"></a>00449       <span class="comment">// devolvemos la ruta a no ser que el callback registrar_solucion nos pida continuar la búsqueda</span>
<a name="l00450"></a>00450       <a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION</a>(ruta, actual) {
<a name="l00451"></a>00451          finalizar = <span class="keyword">true</span>;
<a name="l00452"></a>00452          <span class="keywordflow">return</span> ruta;
<a name="l00453"></a>00453       }
<a name="l00454"></a>00454    }
<a name="l00455"></a>00455    <a class="code" href="ia__ciega_8h.html#8c710b96f42c498d9a8f839de66006ea">IA_ACTUALIZAR_PROFUNDIDAD_MAXIMA</a>( profundidad );
<a name="l00456"></a>00456    <a class="code" href="ia__ciega_8h.html#f5fc73a3321698af5ac603dad6b7b8ba">IA_INCREMENTAR_EXPANDIDOS</a>;
<a name="l00457"></a>00457    <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator operacion = operaciones.begin()
<a name="l00458"></a>00458                                                ; operacion != operaciones.end(); ++ operacion ) {
<a name="l00459"></a>00459       <span class="comment">// 'resultante' es el nodo recien descubierto al aplicar una operacion</span>
<a name="l00460"></a>00460       Estado_t resultante;
<a name="l00461"></a>00461       <span class="keywordflow">if</span> ( ! (*(*operacion))(actual, resultante ) )
<a name="l00462"></a>00462          <span class="keywordflow">continue</span>; <span class="comment">// Si no se puede aplicar esta operacion, intentamos la siguiente</span>
<a name="l00463"></a>00463       <span class="comment">// auxiliar que nos sirve para saber si un estado generado ya se lo había visitado antes</span>
<a name="l00464"></a>00464       pair&lt;typename Visitados_t::iterator, bool&gt; insertado = visitados.insert( resultante );
<a name="l00465"></a>00465       <span class="keywordflow">if</span> ( ! insertado.second )
<a name="l00466"></a>00466          <span class="keywordflow">continue</span>; <span class="comment">// Si el recién descubierto ya había sido visitado, pasamos a la siguiente operación</span>
<a name="l00467"></a>00467       <a class="code" href="ia__ciega_8h.html#6db07d249f26d7e95c401d3a811207e1">IA_INCREMENTAR_VISITADOS</a>;
<a name="l00468"></a>00468       ruta.push_back( *operacion ); <span class="comment">// la ruta actual consta ademas de la operación que acabamos de hacer</span>
<a name="l00469"></a>00469       <span class="comment">// Exploramos la rama correspondiente al estado recien generado (porque es un tipo de depth-first-search)</span>
<a name="l00470"></a>00470       Ruta_t hallada = detalle::preferencia_profundidad&lt;Estado_t, Operaciones_t, Ruta_t&gt;(operaciones
<a name="l00471"></a>00471                      , visitados, ruta, resultante
<a name="l00472"></a>00472 <span class="preprocessor">#ifndef IA_NO_ESTADISTICAS</span>
<a name="l00473"></a>00473 <span class="preprocessor"></span>                     , profundidad + 1
<a name="l00474"></a>00474 <span class="preprocessor">#endif</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span>                     , finalizar
<a name="l00476"></a>00476 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00477"></a>00477 <span class="preprocessor"></span>                     , registrar_solucion
<a name="l00478"></a>00478 <span class="preprocessor">#endif</span>
<a name="l00479"></a>00479 <span class="preprocessor"></span>                     );
<a name="l00480"></a>00480       <span class="keywordflow">if</span> ( finalizar ) <span class="comment">// finalizar puede haber sido puesta en verdadero al explorar la rama recien creada, en tal caso...</span>
<a name="l00481"></a>00481          <span class="keywordflow">return</span> hallada; <span class="comment">// ... dejaríamos de buscar devolviendo la solución hallada (que podria estar en blanco)</span>
<a name="l00482"></a>00482       ruta.pop_back(); <span class="comment">// la operación hecha para llegar a este estado no forma parte de la ruta al siguiente estado a explorar</span>
<a name="l00483"></a>00483       visitados.erase( insertado.first );
<a name="l00484"></a>00484    }
<a name="l00485"></a>00485    <span class="comment">// Hemos recorrido todo el (sub)arbol y no hallamos solucion...</span>
<a name="l00486"></a>00486    <span class="keywordflow">return</span> Operaciones_t();
<a name="l00487"></a>00487 }
<a name="l00488"></a>00488 
<a name="l00499"></a>00499 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t, <span class="keyword">typename</span> Ruta_t &gt;
<a name="l00500"></a><a class="code" href="group__detalle__implementacion.html#gc576de7ced520b771831a409bc671363">00500</a> Ruta_t <a class="code" href="group__detalle__implementacion.html#gc576de7ced520b771831a409bc671363">profundidad_limitada</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00501"></a>00501                , set&lt;Estado_t&gt;&amp; visitados, Ruta_t&amp; ruta
<a name="l00502"></a>00502                , <span class="keyword">const</span> Estado_t&amp; actual, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> profundidad
<a name="l00503"></a>00503                , <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; limite_profundidad
<a name="l00504"></a>00504                , <span class="keywordtype">bool</span>&amp; finalizar
<a name="l00505"></a>00505 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00506"></a>00506                , <span class="keywordtype">bool</span>(*registrar_solucion)(<span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp;
<a name="l00507"></a>00507                                                     ,<span class="keyword">const</span> Estado_t&amp; ) 
<a name="l00508"></a>00508 #endif
<a name="l00509"></a>00509                ){
<a name="l00510"></a>00510    <span class="keyword">typedef</span> set&lt;Estado_t&gt; Visitados_t;
<a name="l00511"></a>00511    
<a name="l00512"></a>00512    <span class="keywordflow">if</span> ( actual.es_meta() ) { <span class="comment">// Si se encontró un estado meta</span>
<a name="l00513"></a>00513       <a class="code" href="ia__ciega_8h.html#66e81ab08112c2f3dc68fa6af14765f3">IA_INCREMENTAR_SOLUCIONES</a>;
<a name="l00514"></a>00514       <span class="comment">// devolvemos la ruta a no ser que el callback registrar_solucion nos pida continuar la búsqueda</span>
<a name="l00515"></a>00515       <a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION</a>(ruta, actual) {
<a name="l00516"></a>00516          finalizar = <span class="keyword">true</span>;
<a name="l00517"></a>00517          <span class="keywordflow">return</span> ruta;
<a name="l00518"></a>00518       }
<a name="l00519"></a>00519    }
<a name="l00520"></a>00520    <a class="code" href="ia__ciega_8h.html#8c710b96f42c498d9a8f839de66006ea">IA_ACTUALIZAR_PROFUNDIDAD_MAXIMA</a>( profundidad );
<a name="l00521"></a>00521    <span class="keywordflow">if</span> ( profundidad == limite_profundidad ) <span class="comment">// si ya se exploró hasta el límite...</span>
<a name="l00522"></a>00522       <span class="keywordflow">return</span> Ruta_t(); <span class="comment">// ...devolvemos una ruta vacía</span>
<a name="l00523"></a>00523    <a class="code" href="ia__ciega_8h.html#f5fc73a3321698af5ac603dad6b7b8ba">IA_INCREMENTAR_EXPANDIDOS</a>;
<a name="l00524"></a>00524    <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator operacion = operaciones.begin()
<a name="l00525"></a>00525                                                ; operacion != operaciones.end(); ++ operacion ) {
<a name="l00526"></a>00526       <span class="comment">// 'resultante' es el nodo recien descubierto al aplicar una operacion</span>
<a name="l00527"></a>00527       Estado_t resultante;
<a name="l00528"></a>00528       <span class="keywordflow">if</span> ( ! (*(*operacion))(actual, resultante ) )
<a name="l00529"></a>00529          <span class="keywordflow">continue</span>; <span class="comment">// Si no se puede aplicar esta operacion, intentamos la siguiente</span>
<a name="l00530"></a>00530       <span class="comment">// auxiliar que nos sirve para saber si un estado generado ya se lo había visitado antes</span>
<a name="l00531"></a>00531       pair&lt;typename Visitados_t::iterator, bool&gt; insertado = visitados.insert( resultante );
<a name="l00532"></a>00532       <span class="keywordflow">if</span> ( ! insertado.second )
<a name="l00533"></a>00533          <span class="keywordflow">continue</span>; <span class="comment">// Si el recién descubierto ya había sido visitado, pasamos a la siguiente operación</span>
<a name="l00534"></a>00534       <a class="code" href="ia__ciega_8h.html#6db07d249f26d7e95c401d3a811207e1">IA_INCREMENTAR_VISITADOS</a>;
<a name="l00535"></a>00535       ruta.push_back( *operacion ); <span class="comment">// la ruta actual consta ademas de la operación que acabamos de hacer</span>
<a name="l00536"></a>00536       <span class="comment">// Exploramos la rama correspondiente al estado recien generado (porque es un tipo de depth-first-search)</span>
<a name="l00537"></a>00537       Ruta_t hallada = detalle::profundidad_limitada&lt;Estado_t, Operaciones_t, Ruta_t&gt;(operaciones
<a name="l00538"></a>00538                      , visitados, ruta, resultante, profundidad + 1, limite_profundidad, finalizar
<a name="l00539"></a>00539 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00540"></a>00540 <span class="preprocessor"></span>                     , registrar_solucion
<a name="l00541"></a>00541 <span class="preprocessor">#endif</span>
<a name="l00542"></a>00542 <span class="preprocessor"></span>                     );
<a name="l00543"></a>00543       <span class="keywordflow">if</span> ( finalizar ) <span class="comment">// finalizar puede haber sido puesta en verdadero al explorar la rama recien creada, en tal caso...</span>
<a name="l00544"></a>00544          <span class="keywordflow">return</span> hallada; <span class="comment">// ... dejaríamos de buscar devolviendo la solución hallada (que podria estar en blanco)</span>
<a name="l00545"></a>00545       ruta.pop_back(); <span class="comment">// la operación hecha para llegar a este estado no forma parte de la ruta al siguiente estado a explorar</span>
<a name="l00546"></a>00546       visitados.erase( insertado.first );
<a name="l00547"></a>00547    }
<a name="l00548"></a>00548    <span class="comment">// Hemos recorrido todo el (sub)arbol y no hallamos solucion...</span>
<a name="l00549"></a>00549    <span class="keywordflow">return</span> Operaciones_t();
<a name="l00550"></a>00550 }
<a name="l00551"></a>00551 
<a name="l00557"></a>00557 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Ruta_t, <span class="keyword">typename</span> Comparador_t&gt;
<a name="l00558"></a><a class="code" href="structia_1_1detalle_1_1_set_estado_y_ruta.html">00558</a> <span class="keyword">struct </span><a class="code" href="structia_1_1detalle_1_1_set_estado_y_ruta.html">SetEstadoYRuta</a> : <span class="keyword">public</span> set&lt; pair&lt; Estado_t, Ruta_t &gt;, Comparador_t &gt; {
<a name="l00559"></a>00559 };
<a name="l00560"></a>00560 
<a name="l00573"></a>00573 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t, <span class="keyword">typename</span> Ruta_t, <span class="keyword">typename</span> Comparador_t &gt;
<a name="l00574"></a><a class="code" href="group__detalle__implementacion.html#gd52da0628461fbda96aac48a75f29122">00574</a> pair&lt;Ruta_t, bool&gt; <a class="code" href="group__detalle__implementacion.html#gd52da0628461fbda96aac48a75f29122">profundidad_limitada_doble</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00575"></a>00575                , set&lt;Estado_t&gt;&amp; visitados
<a name="l00576"></a>00576                , Ruta_t&amp; ruta
<a name="l00577"></a>00577                , <span class="keyword">const</span> Estado_t&amp; actual
<a name="l00578"></a>00578                , <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> profundidad
<a name="l00579"></a>00579                , <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; limite_profundidad
<a name="l00580"></a>00580                , <span class="keywordtype">bool</span>&amp; finalizar
<a name="l00581"></a>00581                , <a class="code" href="structia_1_1detalle_1_1_set_estado_y_ruta.html">SetEstadoYRuta&lt;Estado_t, Ruta_t, Comparador_t&gt;</a>&amp; atajos
<a name="l00582"></a>00582                , <a class="code" href="structia_1_1detalle_1_1_set_estado_y_ruta.html">SetEstadoYRuta&lt;Estado_t, Ruta_t, Comparador_t&gt;</a>&amp; nuevos_atajos
<a name="l00583"></a>00583 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00584"></a>00584                , <span class="keywordtype">bool</span>(*registrar_solucion)(vector&lt; typename Operaciones_t::value_type&gt;&amp;
<a name="l00585"></a>00585                                                     , <span class="keyword">const</span> Estado_t&amp; ) 
<a name="l00586"></a>00586 #endif
<a name="l00587"></a>00587                ) {
<a name="l00588"></a>00588    <span class="keyword">typedef</span> set&lt;Estado_t&gt; Visitados_t;
<a name="l00589"></a>00589    <span class="keyword">const</span> Ruta_t ruta_vacia;
<a name="l00590"></a>00590    <a class="code" href="ia__ciega_8h.html#8c710b96f42c498d9a8f839de66006ea">IA_ACTUALIZAR_PROFUNDIDAD_MAXIMA</a>( profundidad );
<a name="l00591"></a>00591    <span class="keywordflow">if</span> ( atajos.find( make_pair(actual, Ruta_t()) ) != atajos.end() ) { <span class="comment">// Si estado actual esta en los nodos inferiores del arbol alterno...</span>
<a name="l00592"></a>00592       <span class="comment">// ... la solución se ha hallado</span>
<a name="l00593"></a>00593       <a class="code" href="ia__ciega_8h.html#66e81ab08112c2f3dc68fa6af14765f3">IA_INCREMENTAR_SOLUCIONES</a>;
<a name="l00594"></a>00594       <span class="comment">// devolvemos la ruta a no ser que el callback registrar_solucion nos pida continuar la búsqueda</span>
<a name="l00595"></a>00595       <a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION</a>(ruta, actual) {
<a name="l00596"></a>00596          finalizar = <span class="keyword">true</span>;
<a name="l00597"></a>00597          <span class="keywordflow">return</span> make_pair(ruta,<span class="keyword">true</span>);
<a name="l00598"></a>00598       }
<a name="l00599"></a>00599    }
<a name="l00600"></a>00600    <span class="keywordflow">if</span> ( profundidad == limite_profundidad ) { <span class="comment">// Si hemos llegado a la máxima profundidad permitida ...</span>
<a name="l00601"></a>00601       <span class="comment">// ...insertamos este nodo para que al recorrer el arbol alterno sea tomado en cuenta como uno de los del nivel inferior</span>
<a name="l00602"></a>00602       nuevos_atajos.insert( make_pair( actual, ruta ) );
<a name="l00603"></a>00603       <span class="keywordflow">return</span> make_pair(Ruta_t(),<span class="keyword">false</span>);
<a name="l00604"></a>00604    }
<a name="l00605"></a>00605    <a class="code" href="ia__ciega_8h.html#f5fc73a3321698af5ac603dad6b7b8ba">IA_INCREMENTAR_EXPANDIDOS</a>;
<a name="l00606"></a>00606    <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator operacion = operaciones.begin()
<a name="l00607"></a>00607                                                           ; operacion != operaciones.end(); ++ operacion ) {
<a name="l00608"></a>00608       <span class="comment">// 'resultante' es el estado generado con esta operación</span>
<a name="l00609"></a>00609       Estado_t resultante;
<a name="l00610"></a>00610       <span class="keywordflow">if</span> ( ! (*(*operacion))(actual, resultante ) )
<a name="l00611"></a>00611          <span class="keywordflow">continue</span>; <span class="comment">// Si no se puede aplicar esta operacion al estado actual, intentamos con la siguiente operacion</span>
<a name="l00612"></a>00612       pair&lt;typename Visitados_t::iterator, bool&gt; insertado = visitados.insert( resultante );
<a name="l00613"></a>00613       <span class="keywordflow">if</span> ( ! insertado.second )
<a name="l00614"></a>00614          <span class="keywordflow">continue</span>; <span class="comment">// Si el estado descubierto ya había sido visitado, intentamos con la siguiente operacion</span>
<a name="l00615"></a>00615       <a class="code" href="ia__ciega_8h.html#6db07d249f26d7e95c401d3a811207e1">IA_INCREMENTAR_VISITADOS</a>;
<a name="l00616"></a>00616       ruta.push_back( *operacion ); <span class="comment">// la ruta consiste en la misma del estado padre mas la operacion recién aplicada</span>
<a name="l00617"></a>00617       pair&lt;Ruta_t,bool&gt; hallada=profundidad_limitada_doble&lt;Estado_t,Operaciones_t,Ruta_t,Comparador_t&gt;
<a name="l00618"></a>00618                                                          (operaciones, visitados, ruta, resultante, profundidad + 1
<a name="l00619"></a>00619                                                            ,limite_profundidad
<a name="l00620"></a>00620                                                            , finalizar, atajos, nuevos_atajos, NULL);
<a name="l00621"></a>00621       <span class="keywordflow">if</span> ( finalizar ) <span class="comment">// finalizar puede haber sido puesta en verdadero al explorar la rama recien creada, en tal caso...</span>
<a name="l00622"></a>00622          <span class="keywordflow">return</span> hallada; <span class="comment">// ... dejaríamos de buscar devolviendo la solución hallada (que podria estar en blanco)</span>
<a name="l00623"></a>00623       ruta.pop_back(); <span class="comment">// la operación hecha para llegar a este estado no forma parte de la ruta al siguiente estado a explorar</span>
<a name="l00624"></a>00624       visitados.erase( insertado.first );
<a name="l00625"></a>00625    }   
<a name="l00626"></a>00626    <span class="keywordflow">return</span> make_pair( Ruta_t(), <span class="keyword">false</span>);
<a name="l00627"></a>00627 }
<a name="l00628"></a>00628 
<a name="l00634"></a>00634 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Ruta_t, <span class="keyword">typename</span> Comparador_mejor_t&gt;
<a name="l00635"></a><a class="code" href="structia_1_1detalle_1_1_multiset_estado_y_ruta.html">00635</a> <span class="keyword">struct </span><a class="code" href="structia_1_1detalle_1_1_multiset_estado_y_ruta.html">MultisetEstadoYRuta</a> : <span class="keyword">public</span> multiset&lt; pair&lt; Estado_t, Ruta_t&gt;, Comparador_mejor_t &gt; {
<a name="l00636"></a>00636 };
<a name="l00637"></a>00637 
<a name="l00643"></a>00643 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Comparador_mejor_t, <span class="keyword">typename</span> Ruta_t, <span class="keyword">typename</span> Estado_t
<a name="l00644"></a>00644                 ,<span class="keyword">typename</span> Operaciones_t &gt;
<a name="l00645"></a><a class="code" href="group__detalle__implementacion.html#ge15de63db4b071b0a2e2d1b7b221eefb">00645</a> Ruta_t <a class="code" href="group__detalle__implementacion.html#ge15de63db4b071b0a2e2d1b7b221eefb">primero_mejor</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00646"></a>00646                            , set&lt;Estado_t&gt;&amp; visitados
<a name="l00647"></a>00647                            , <a class="code" href="structia_1_1detalle_1_1_multiset_estado_y_ruta.html">detalle::MultisetEstadoYRuta&lt;Estado_t,Ruta_t,Comparador_mejor_t&gt;</a>&amp; expansibles
<a name="l00648"></a>00648 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00649"></a>00649                            , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp; 
<a name="l00650"></a>00650                                                                  , <span class="keyword">const</span> Estado_t&amp;)
<a name="l00651"></a>00651 #endif
<a name="l00652"></a>00652                            ) {
<a name="l00653"></a>00653    <span class="keyword">typedef</span> set&lt;Estado_t&gt; Visitados_t;
<a name="l00654"></a>00654    <span class="keywordflow">while</span> ( ! expansibles.empty() ) {
<a name="l00655"></a>00655       Estado_t actual( expansibles.begin()-&gt;first );
<a name="l00656"></a>00656       Ruta_t ruta;
<a name="l00657"></a>00657       <span class="comment">// Para evitar copiar toda la ruta. En la siguiente linea quito al elemento afectado</span>
<a name="l00658"></a>00658       <span class="comment">// En principio la ruta de los estado que se crearán son la misma que la de su padre</span>
<a name="l00659"></a>00659       ruta.swap( *const_cast&lt;Ruta_t*&gt;(&amp;expansibles.begin()-&gt;second) ); 
<a name="l00660"></a>00660       expansibles.erase( expansibles.begin() );
<a name="l00661"></a>00661       <a class="code" href="ia__ciega_8h.html#8c710b96f42c498d9a8f839de66006ea">IA_ACTUALIZAR_PROFUNDIDAD_MAXIMA</a>( ruta.size() );
<a name="l00662"></a>00662       <a class="code" href="ia__ciega_8h.html#f5fc73a3321698af5ac603dad6b7b8ba">IA_INCREMENTAR_EXPANDIDOS</a>;
<a name="l00663"></a>00663       <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator operacion = operaciones.begin()
<a name="l00664"></a>00664                                            ; operacion != operaciones.end(); ++ operacion ) {         
<a name="l00665"></a>00665          Estado_t resultante;
<a name="l00666"></a>00666          <span class="keywordflow">if</span> ( ! (*(*operacion))(actual, resultante) )
<a name="l00667"></a>00667             <span class="keywordflow">continue</span>; <span class="comment">// Si no se puede aplicar esta operacion, intentamos la siguiente</span>
<a name="l00668"></a>00668          <span class="comment">// auxiliar para saber si un estado ya se había visitado antes</span>
<a name="l00669"></a>00669          pair&lt; typename set&lt;Estado_t&gt;::iterator, <span class="keywordtype">bool</span> &gt; insertado = visitados.insert( resultante );
<a name="l00670"></a>00670          <span class="keywordflow">if</span> ( ! insertado.second )
<a name="l00671"></a>00671             <span class="keywordflow">continue</span>; <span class="comment">// Si ya se habia visitado este estado, intentamos la siguiente operacion</span>
<a name="l00672"></a>00672          <a class="code" href="ia__ciega_8h.html#6db07d249f26d7e95c401d3a811207e1">IA_INCREMENTAR_VISITADOS</a>;
<a name="l00673"></a>00673          ruta.push_back( *operacion ); <span class="comment">// añadimos a la ruta de este nuevo nodo la operacion aplicada</span>
<a name="l00674"></a>00674          expansibles.insert( make_pair( resultante, ruta ) );
<a name="l00675"></a>00675          <span class="keywordflow">if</span> ( resultante.es_meta() ) { <span class="comment">// Si hemos encontrado un estado meta...</span>
<a name="l00676"></a>00676             <a class="code" href="ia__ciega_8h.html#66e81ab08112c2f3dc68fa6af14765f3">IA_INCREMENTAR_SOLUCIONES</a>;
<a name="l00677"></a>00677             <span class="comment">// devolvemos la ruta a no ser que el callback registrar_solucion nos pida continuar la búsqueda</span>
<a name="l00678"></a>00678             <a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION</a>(ruta, resultante)
<a name="l00679"></a>00679                <span class="keywordflow">return</span> ruta;
<a name="l00680"></a>00680          }
<a name="l00681"></a>00681          ruta.pop_back(); <span class="comment">//quitamos a la ruta esta operacion, porque no formará parte de la del siguiente hijo del nodo padre         </span>
<a name="l00682"></a>00682       }
<a name="l00683"></a>00683    }
<a name="l00684"></a>00684    <span class="comment">// Finalmente devolver una ruta vacia, ya sea porque no se encontro ninguna solucion o nos hicieron continuar con el callback</span>
<a name="l00685"></a>00685    <span class="keywordflow">return</span> Ruta_t();
<a name="l00686"></a>00686 }
<a name="l00687"></a>00687 
<a name="l00690"></a>00690 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> T&gt;
<a name="l00691"></a><a class="code" href="structia_1_1detalle_1_1_compara_estados_ignorando_rutas.html">00691</a> <span class="keyword">struct </span><a class="code" href="structia_1_1detalle_1_1_compara_estados_ignorando_rutas.html">ComparaEstadosIgnorandoRutas</a> {
<a name="l00692"></a><a class="code" href="structia_1_1detalle_1_1_compara_estados_ignorando_rutas.html#dd389f33d92ee51907b5f3fb51b3cf9a">00692</a>    <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> pair&lt;Estado_t, T &gt;&amp; izq, <span class="keyword">const</span> pair&lt;Estado_t, T &gt;&amp; der)<span class="keyword"> const</span>{
<a name="l00693"></a>00693       <span class="keywordflow">return</span> izq.first &lt; der.first;
<a name="l00694"></a>00694    }
<a name="l00695"></a>00695 };
<a name="l00696"></a>00696 
<a name="l00697"></a>00697 } <span class="comment">// fin del namespace detalle (por ultima vez)</span>
<a name="l00698"></a>00698 
<a name="l00708"></a>00708 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00709"></a><a class="code" href="group__algoritmos.html#g5751a93210591eea5751a12906205cfa">00709</a> vector&lt; typename Operaciones_t::value_type&gt; <a class="code" href="group__detalle__implementacion.html#g146585979cd3482b56bb8ed8aadcdcd7">preferencia_amplitud</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00710"></a>00710             , <span class="keyword">const</span> Estado_t&amp; inicial 
<a name="l00711"></a>00711             , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp; 
<a name="l00712"></a>00712                                                   ,<span class="keyword">const</span> Estado_t&amp; ) = NULL ) {
<a name="l00713"></a>00713    <span class="keyword">typedef</span> vector&lt; typename Operaciones_t::value_type &gt; Ruta_t;
<a name="l00714"></a>00714    <a class="code" href="ia__ciega_8h.html#2ed87f010933dea8539d11d5b298021a">IA_REINICIAR_ESTADISTICAS</a>;
<a name="l00715"></a>00715    <a class="code" href="structia_1_1detalle_1_1_estado_y_ruta.html">detalle::EstadoYRuta&lt;Estado_t, Operaciones_t&gt;</a> principio;
<a name="l00716"></a>00716    principio.push_back( make_pair( inicial, Ruta_t() ) );
<a name="l00717"></a>00717    
<a name="l00718"></a>00718    <a class="code" href="ia__ciega_8h.html#75123461572925fe75a7797d9930f1ff">IA_INICIO_CRONOMETRO</a>;
<a name="l00719"></a>00719    <span class="keywordflow">if</span> ( inicial.es_meta() ) {<span class="comment">// El algoritmo interno no verifica que el estado inicial sea el estado meta, lo hacemos aquí</span>
<a name="l00720"></a>00720       <a class="code" href="group__detalle__implementacion.html#g2ca880b75037a67e30bc43fac3a2d7f8">IA_IF_DEVUELVE_FALSO_REGISTRAR_SOLUCION</a>( Ruta_t(), inicial )
<a name="l00721"></a>00721          <span class="comment">/* no-operacion*/</span>;
<a name="l00722"></a>00722       <span class="keywordflow">return</span> vector&lt;typename Operaciones_t::value_type&gt;();
<a name="l00723"></a>00723    }
<a name="l00724"></a>00724    Ruta_t solucion = detalle::preferencia_amplitud&lt;Estado_t, Operaciones_t&gt;(operaciones, principio
<a name="l00725"></a>00725 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00726"></a>00726 <span class="preprocessor"></span>                                                                                                        , registrar_solucion
<a name="l00727"></a>00727 <span class="preprocessor">#endif</span>
<a name="l00728"></a>00728 <span class="preprocessor"></span>                                                                                                       );
<a name="l00729"></a>00729    <a class="code" href="ia__ciega_8h.html#7069a221044d02e36ba170bb4d9f9f93">IA_FIN_CRONOMETRO</a>;
<a name="l00730"></a>00730    <span class="keywordflow">return</span> solucion;
<a name="l00731"></a>00731 }
<a name="l00732"></a>00732 
<a name="l00743"></a>00743 <span class="keyword">template</span> &lt; <span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00744"></a><a class="code" href="group__algoritmos.html#g93f93e883b4d10e71f109d1a08d75dea">00744</a> vector&lt; typename Operaciones_t::value_type&gt; <a class="code" href="group__detalle__implementacion.html#ga81bb2a346107cbfe5debe839f71e5d8">preferencia_profundidad</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00745"></a>00745                , <span class="keyword">const</span> Estado_t&amp; inicial
<a name="l00746"></a>00746                , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp;
<a name="l00747"></a>00747                                                     , <span class="keyword">const</span> Estado_t&amp; ) = NULL ) {
<a name="l00748"></a>00748    <a class="code" href="ia__ciega_8h.html#2ed87f010933dea8539d11d5b298021a">IA_REINICIAR_ESTADISTICAS</a>;
<a name="l00749"></a>00749    set&lt;Estado_t&gt; visitados;
<a name="l00750"></a>00750    visitados.insert( inicial );
<a name="l00751"></a>00751    <span class="keyword">typedef</span> vector&lt;typename Operaciones_t::value_type&gt; Ruta_t;
<a name="l00752"></a>00752    Ruta_t ruta;
<a name="l00753"></a>00753    <span class="keywordtype">bool</span> finalizar = <span class="keyword">false</span>;
<a name="l00754"></a>00754    <a class="code" href="ia__ciega_8h.html#75123461572925fe75a7797d9930f1ff">IA_INICIO_CRONOMETRO</a>;
<a name="l00755"></a>00755    Ruta_t solucion = detalle::preferencia_profundidad&lt;Estado_t, Operaciones_t, Ruta_t&gt;
<a name="l00756"></a>00756                                           (operaciones, visitados, ruta, inicial
<a name="l00757"></a>00757 <span class="preprocessor">#ifndef IA_NO_ESTADISTICAS</span>
<a name="l00758"></a>00758 <span class="preprocessor"></span>                                            , 0
<a name="l00759"></a>00759 <span class="preprocessor">#endif</span>
<a name="l00760"></a>00760 <span class="preprocessor"></span>                                            , finalizar
<a name="l00761"></a>00761 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00762"></a>00762 <span class="preprocessor"></span>                                            , registrar_solucion 
<a name="l00763"></a>00763 <span class="preprocessor">#endif</span>
<a name="l00764"></a>00764 <span class="preprocessor"></span>                                          );
<a name="l00765"></a>00765    <a class="code" href="ia__ciega_8h.html#7069a221044d02e36ba170bb4d9f9f93">IA_FIN_CRONOMETRO</a>;
<a name="l00766"></a>00766    <span class="keywordflow">return</span> solucion;
<a name="l00767"></a>00767 }
<a name="l00768"></a>00768 
<a name="l00777"></a>00777 <span class="keyword">template</span> &lt; <span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00778"></a><a class="code" href="group__algoritmos.html#g7e6250c9a79fe9cbf813420ef1e1ac4b">00778</a> vector&lt; typename Operaciones_t::value_type&gt; <a class="code" href="group__detalle__implementacion.html#gc576de7ced520b771831a409bc671363">profundidad_limitada</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00779"></a>00779                , <span class="keyword">const</span> Estado_t&amp; inicial
<a name="l00780"></a>00780                , <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; limite_profundidad
<a name="l00781"></a>00781                , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp;
<a name="l00782"></a>00782                                                     , <span class="keyword">const</span> Estado_t&amp; ) = NULL ) {
<a name="l00783"></a>00783    <a class="code" href="ia__ciega_8h.html#2ed87f010933dea8539d11d5b298021a">IA_REINICIAR_ESTADISTICAS</a>;
<a name="l00784"></a>00784    set&lt;Estado_t&gt; visitados;
<a name="l00785"></a>00785    visitados.insert( inicial );
<a name="l00786"></a>00786    <span class="keyword">typedef</span> vector&lt;typename Operaciones_t::value_type&gt; Ruta_t;
<a name="l00787"></a>00787    Ruta_t ruta;
<a name="l00788"></a>00788    <span class="keywordtype">bool</span> finalizar = <span class="keyword">false</span>;
<a name="l00789"></a>00789    <a class="code" href="ia__ciega_8h.html#75123461572925fe75a7797d9930f1ff">IA_INICIO_CRONOMETRO</a>;
<a name="l00790"></a>00790    Ruta_t solucion = detalle::profundidad_limitada&lt;Estado_t, Operaciones_t, Ruta_t&gt;
<a name="l00791"></a>00791                                           (operaciones, visitados, ruta, inicial, 0, limite_profundidad, finalizar
<a name="l00792"></a>00792 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00793"></a>00793 <span class="preprocessor"></span>                                            , registrar_solucion
<a name="l00794"></a>00794 <span class="preprocessor">#endif</span>
<a name="l00795"></a>00795 <span class="preprocessor"></span>                                          );
<a name="l00796"></a>00796    <a class="code" href="ia__ciega_8h.html#7069a221044d02e36ba170bb4d9f9f93">IA_FIN_CRONOMETRO</a>;
<a name="l00797"></a>00797    <span class="keywordflow">return</span> solucion;
<a name="l00798"></a>00798 }
<a name="l00799"></a>00799 
<a name="l00808"></a>00808 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00809"></a><a class="code" href="group__algoritmos.html#g4e950218e635de0baf0e635bc0d1acef">00809</a> vector&lt;typename Operaciones_t::value_type&gt; <a class="code" href="group__algoritmos.html#g4e950218e635de0baf0e635bc0d1acef">profundidad_iterativa</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00810"></a>00810                , <span class="keyword">const</span> Estado_t&amp; inicial
<a name="l00811"></a>00811                , <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; limite_profundidad
<a name="l00812"></a>00812                , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp;
<a name="l00813"></a>00813                                                     , <span class="keyword">const</span> Estado_t&amp;) = NULL ) {
<a name="l00814"></a>00814    <a class="code" href="ia__ciega_8h.html#2ed87f010933dea8539d11d5b298021a">IA_REINICIAR_ESTADISTICAS</a>;
<a name="l00815"></a>00815    set&lt;Estado_t&gt; visitados;
<a name="l00816"></a>00816    <span class="keyword">typedef</span> vector&lt;typename Operaciones_t::value_type&gt; Ruta_t;
<a name="l00817"></a>00817    Ruta_t ruta, solucion;
<a name="l00818"></a>00818    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limite_actual = 0;
<a name="l00819"></a>00819    <span class="keywordtype">bool</span> finalizar = <span class="keyword">false</span>;
<a name="l00820"></a>00820    <a class="code" href="ia__ciega_8h.html#75123461572925fe75a7797d9930f1ff">IA_INICIO_CRONOMETRO</a>;
<a name="l00821"></a>00821    <span class="keywordflow">do</span> {
<a name="l00822"></a>00822       <a class="code" href="ia__ciega_8h.html#552aca858906c0b6acf6652d1eec7f0f">IA_REINICIAR_VISITADOS</a>;
<a name="l00823"></a>00823       limite_actual ++;
<a name="l00824"></a>00824       solucion = <a class="code" href="group__detalle__implementacion.html#gc576de7ced520b771831a409bc671363">detalle::profundidad_limitada</a>( operaciones, visitados, ruta, inicial, 0, limite_actual
<a name="l00825"></a>00825                                                              , finalizar
<a name="l00826"></a>00826 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00827"></a>00827                                                              , registrar_solucion
<a name="l00828"></a>00828 #endif
<a name="l00829"></a>00829                                                            );
<a name="l00830"></a>00830       <span class="keywordflow">if</span> ( ! solucion.empty() )
<a name="l00831"></a>00831          <span class="keywordflow">break</span>;
<a name="l00832"></a>00832    }<span class="keywordflow">while</span>( limite_actual &lt; limite_profundidad );
<a name="l00833"></a>00833    <a class="code" href="ia__ciega_8h.html#7069a221044d02e36ba170bb4d9f9f93">IA_FIN_CRONOMETRO</a>;
<a name="l00834"></a>00834    <span class="keywordflow">return</span> solucion; <span class="comment">// Es vació ssi no se halló la solucion</span>
<a name="l00835"></a>00835 }
<a name="l00836"></a>00836 
<a name="l00859"></a>00859 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Comparador_mejor_t, <span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t&gt;
<a name="l00860"></a><a class="code" href="group__algoritmos.html#gef69ca62c07d45deb94e1ae106b08193">00860</a> vector&lt;typename Operaciones_t::value_type&gt; <a class="code" href="group__detalle__implementacion.html#ge15de63db4b071b0a2e2d1b7b221eefb">primero_mejor</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones
<a name="l00861"></a>00861                , <span class="keyword">const</span> Estado_t&amp; inicial
<a name="l00862"></a>00862                , <span class="keywordtype">bool</span>(*registrar_solucion)( <span class="keyword">const</span> vector&lt;typename Operaciones_t::value_type&gt;&amp;
<a name="l00863"></a>00863                                                     , <span class="keyword">const</span> Estado_t&amp;) = NULL ) {  
<a name="l00864"></a>00864    <span class="keyword">typedef</span> vector&lt;typename Operaciones_t::value_type&gt; Ruta_t;
<a name="l00865"></a>00865    <a class="code" href="ia__ciega_8h.html#2ed87f010933dea8539d11d5b298021a">IA_REINICIAR_ESTADISTICAS</a>;
<a name="l00866"></a>00866    set&lt;Estado_t&gt; visitados;
<a name="l00867"></a>00867    visitados.insert( inicial );
<a name="l00868"></a>00868    <a class="code" href="structia_1_1detalle_1_1_multiset_estado_y_ruta.html">detalle::MultisetEstadoYRuta&lt;Estado_t, Ruta_t, Comparador_mejor_t&gt;</a> expansibles;
<a name="l00869"></a>00869    <a class="code" href="ia__ciega_8h.html#75123461572925fe75a7797d9930f1ff">IA_INICIO_CRONOMETRO</a>;
<a name="l00870"></a>00870    expansibles.insert( make_pair( inicial, Ruta_t() ) );  <span class="comment">// Si el compilador se queja en esta linea, probablemente la...</span>
<a name="l00871"></a>00871                                                                       <span class="comment">//...estructura Comparador_mejor_t (que elige el mejor estado)...</span>
<a name="l00872"></a>00872                                                                       <span class="comment">//...tiene al operator() con los parámetros del tipo herrado, vea...</span>
<a name="l00873"></a>00873                                                                       <span class="comment">//...el ejemplo viajero.cpp si usa functores para las operaciones</span>
<a name="l00874"></a>00874    Ruta_t solucion = detalle::primero_mejor&lt;Comparador_mejor_t, Ruta_t, Estado_t, Operaciones_t&gt;
<a name="l00875"></a>00875                                                   (operaciones, visitados ,expansibles
<a name="l00876"></a>00876 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00877"></a>00877 <span class="preprocessor"></span>                                                   , registrar_solucion 
<a name="l00878"></a>00878 <span class="preprocessor">#endif</span>
<a name="l00879"></a>00879 <span class="preprocessor"></span>                                                  );
<a name="l00880"></a>00880    <a class="code" href="ia__ciega_8h.html#7069a221044d02e36ba170bb4d9f9f93">IA_FIN_CRONOMETRO</a>;
<a name="l00881"></a>00881    <span class="keywordflow">return</span> solucion;
<a name="l00882"></a>00882 }
<a name="l00883"></a>00883 
<a name="l00897"></a>00897 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Estado_t, <span class="keyword">typename</span> Operaciones_t &gt;
<a name="l00898"></a>00898 pair&lt; vector&lt;typename Operaciones_t::value_type&gt;, vector&lt;typename Operaciones_t::value_type&gt; &gt;
<a name="l00899"></a><a class="code" href="group__algoritmos.html#gb77ee36cd0863098b3ea21168341acfc">00899</a> <a class="code" href="group__detalle__implementacion.html#gd52da0628461fbda96aac48a75f29122">profundidad_limitada_doble</a>(<span class="keyword">const</span> Operaciones_t&amp; operaciones, <span class="keyword">const</span> Estado_t&amp; inicial
<a name="l00900"></a>00900                                     , <span class="keyword">const</span> Estado_t&amp; <span class="keyword">final</span>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; limite_profundidad
<a name="l00901"></a>00901                                     , <span class="keywordtype">bool</span>(*registrar_solucion)(vector&lt; typename Operaciones_t::value_type&gt;&amp;
<a name="l00902"></a>00902                                                                          ,<span class="keyword">const</span> Estado_t&amp; ) = NULL ) {
<a name="l00903"></a>00903    <span class="keyword">typedef</span> <a class="code" href="structia_1_1detalle_1_1_set_estado_y_ruta.html">detalle::SetEstadoYRuta</a>&lt;Estado_t, Operaciones_t
<a name="l00904"></a>00904                                                     ,<a class="code" href="structia_1_1detalle_1_1_compara_estados_ignorando_rutas.html">detalle::ComparaEstadosIgnorandoRutas&lt;Estado_t, Operaciones_t&gt;</a> 
<a name="l00905"></a>00905                                                 &gt; Atajos_t;
<a name="l00906"></a>00906    Atajos_t atajos_adelante, atajos_atras;
<a name="l00907"></a>00907    atajos_atras.insert( make_pair(<span class="keyword">final</span>, Operaciones_t()) );
<a name="l00908"></a>00908    set&lt;Estado_t&gt; visitados_vacio;
<a name="l00909"></a>00909    Operaciones_t ruta_vacia;
<a name="l00910"></a>00910    pair&lt; vector&lt;typename Operaciones_t::value_type&gt; , <span class="keywordtype">bool</span>&gt; adelante, atras;
<a name="l00911"></a>00911    <span class="keywordtype">bool</span> finalizar = <span class="keyword">false</span>;
<a name="l00912"></a>00912    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> limite_actual = 0;
<a name="l00913"></a>00913    <span class="keywordflow">do</span>{
<a name="l00914"></a>00914       limite_actual ++;
<a name="l00915"></a>00915       atajos_adelante.clear();
<a name="l00916"></a>00916       adelante = <a class="code" href="group__detalle__implementacion.html#gd52da0628461fbda96aac48a75f29122">detalle::profundidad_limitada_doble</a>(operaciones, visitados_vacio, ruta_vacia, inicial
<a name="l00917"></a>00917                                                                      , 0, limite_actual, finalizar, atajos_atras
<a name="l00918"></a>00918                                                                      , atajos_adelante
<a name="l00919"></a>00919 #ifndef IA_NO_REGISTRAR_SOLUCION
<a name="l00920"></a>00920                                                                      , registrar_solucion
<a name="l00921"></a>00921 #endif
<a name="l00922"></a>00922                                                                      );
<a name="l00923"></a>00923       <span class="keywordflow">if</span> ( ! finalizar) {
<a name="l00924"></a>00924          atajos_atras.clear();
<a name="l00925"></a>00925          atras = detalle::profundidad_limitada_doble&lt; Estado_t, Operaciones_t, Operaciones_t&gt;
<a name="l00926"></a>00926                                     (operaciones, visitados_vacio, ruta_vacia, <span class="keyword">final</span>, 0, limite_actual, finalizar
<a name="l00927"></a>00927                                       ,atajos_adelante, atajos_atras
<a name="l00928"></a>00928 <span class="preprocessor">#ifndef IA_NO_REGISTRAR_SOLUCION</span>
<a name="l00929"></a>00929 <span class="preprocessor"></span>                                      ,registrar_solucion
<a name="l00930"></a>00930 <span class="preprocessor">#endif</span>
<a name="l00931"></a>00931 <span class="preprocessor"></span>                                     );
<a name="l00932"></a>00932       }
<a name="l00933"></a>00933    }<span class="keywordflow">while</span> ( !finalizar &amp;&amp; limite_actual &lt; limite_profundidad );
<a name="l00934"></a>00934    <span class="keywordflow">if</span> ( ! finalizar )
<a name="l00935"></a>00935       <span class="keywordflow">return</span> make_pair(vector&lt;typename Operaciones_t::value_type&gt;()
<a name="l00936"></a>00936                                ,vector&lt;typename Operaciones_t::value_type&gt;() );
<a name="l00937"></a>00937    <span class="comment">// Obtener la ruta del lado opuesto al que se llegó</span>
<a name="l00938"></a>00938    vector&lt;typename Operaciones_t::value_type&gt;&amp; ruta_conocida 
<a name="l00939"></a>00939                                                                           = atras.first.empty() ? adelante.first : atras.first;
<a name="l00940"></a>00940    Estado_t estado = atras.first.empty() ? inicial : final ;
<a name="l00941"></a>00941    Estado_t nuevo;
<a name="l00942"></a>00942    <span class="keywordflow">for</span>( <span class="keyword">typename</span> Operaciones_t::const_iterator it_operacion = ruta_conocida.begin()
<a name="l00943"></a>00943                                            ; it_operacion != ruta_conocida.end(); ++ it_operacion ) {
<a name="l00944"></a>00944       <span class="keywordtype">bool</span> resultado = (*(*it_operacion))(estado, nuevo);
<a name="l00945"></a>00945       assert( resultado );
<a name="l00946"></a>00946       estado = nuevo;
<a name="l00947"></a>00947    }
<a name="l00948"></a>00948    <span class="keyword">const</span> Atajos_t&amp; atajos = atras.first.empty() ? atajos_atras : atajos_adelante ;
<a name="l00949"></a>00949    <span class="keyword">typename</span> Atajos_t::const_iterator it_atajo = atajos.find( make_pair( estado, Operaciones_t() ) );
<a name="l00950"></a>00950    assert( it_atajo != atajos.end() );
<a name="l00951"></a>00951    <span class="keywordflow">if</span> ( atras.first.empty() )
<a name="l00952"></a>00952       <span class="keywordflow">return</span> make_pair( adelante.first, it_atajo-&gt;second );
<a name="l00953"></a>00953    <span class="keywordflow">else</span>
<a name="l00954"></a>00954       <span class="keywordflow">return</span> make_pair( it_atajo-&gt;second, atras.first );
<a name="l00955"></a>00955 }
<a name="l00956"></a>00956 
<a name="l00957"></a>00957 
<a name="l00958"></a>00958 
<a name="l00959"></a>00959 
<a name="l00960"></a>00960 
<a name="l00961"></a>00961 <span class="comment">/*                        GRAFOS                  */</span>
<a name="l00962"></a>00962 
<a name="l00963"></a>00963 
<a name="l00964"></a>00964 
<a name="l00966"></a>00966 <span class="keyword">template</span> &lt; <span class="keyword">typename</span> Nodo_t, <span class="keyword">typename</span> Iterador_t, <span class="keyword">typename</span> Costo_t = <span class="keywordtype">int</span> &gt;
<a name="l00967"></a>00967 <span class="keyword">struct </span>Enlaces;
<a name="l00968"></a>00968    
<a name="l00975"></a>00975 <span class="keyword">template</span> &lt; <span class="keyword">typename</span> Nodo_t, <span class="keyword">typename</span> Iterador_t, <span class="keyword">typename</span> Costo_t = <span class="keywordtype">int</span>&gt;
<a name="l00976"></a><a class="code" href="structia_1_1_grafo.html">00976</a> <span class="keyword">struct </span><a class="code" href="structia_1_1_grafo.html">Grafo</a> : <span class="keyword">public</span> map&lt;Nodo_t, Enlaces&lt;Nodo_t, Iterador_t, Costo_t&gt; &gt; {
<a name="l00978"></a><a class="code" href="structia_1_1_grafo.html#3bc9cd541cbe31b83f70a00f95639456">00978</a>    <span class="keyword">typedef</span> <a class="code" href="structia_1_1_enlaces.html">Enlaces&lt;Nodo_t, Iterador_t, Costo_t&gt;</a> <a class="code" href="structia_1_1_grafo.html#3bc9cd541cbe31b83f70a00f95639456">Enlaces_t</a>;
<a name="l00980"></a>00980    <a class="code" href="structia_1_1_grafo.html#3bc9cd541cbe31b83f70a00f95639456">Enlaces_t</a>&amp; operator[]( <span class="keyword">const</span> Nodo_t&amp; origen );
<a name="l00982"></a><a class="code" href="structia_1_1_grafo.html#09489a9977c19f7e01be7230ed04eae8">00982</a>    ~<a class="code" href="structia_1_1_grafo.html">Grafo</a>() {
<a name="l00983"></a>00983       <span class="keyword">typename</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::iterator</a> it_nodo;
<a name="l00984"></a>00984       <span class="keyword">typename</span>  Enlaces_t::iterator it_enlace;
<a name="l00985"></a>00985       <span class="keywordflow">for</span>( it_nodo = this-&gt;begin(); it_nodo != this-&gt;end(); ++ it_nodo )
<a name="l00986"></a>00986          <span class="keywordflow">for</span>( it_enlace = it_nodo-&gt;second.begin(); it_enlace != it_nodo-&gt;second.end(); ++ it_enlace )
<a name="l00987"></a>00987             <span class="keyword">delete</span> it_enlace-&gt;second;
<a name="l00988"></a>00988    }
<a name="l00989"></a>00989 };
<a name="l00990"></a>00990 
<a name="l00993"></a>00993 <span class="keyword">template</span> &lt; <span class="keyword">typename</span> Nodo_t, <span class="keyword">typename</span> Iterador_t, <span class="keyword">typename</span> Costo_t &gt;
<a name="l00994"></a><a class="code" href="structia_1_1_enlaces.html">00994</a> <span class="keyword">struct </span><a class="code" href="structia_1_1_enlaces.html">Enlaces</a> : <span class="keyword">public</span> multimap&lt; Costo_t, const Iterador_t* &gt; {
<a name="l00995"></a><a class="code" href="structia_1_1_enlaces.html#e8be1f1d119a41541a6633bc5d6c367e">00995</a>    <span class="keyword">typedef</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;</a> <a class="code" href="structia_1_1_grafo.html">Grafo_t</a>;
<a name="l00996"></a><a class="code" href="structia_1_1_enlaces.html#184c9dd55071c8ca3b2cc99d96a2b2ea">00996</a>    <span class="keyword">typedef</span> multimap&lt;Costo_t, const Iterador_t* &gt; <a class="code" href="structia_1_1_enlaces.html#184c9dd55071c8ca3b2cc99d96a2b2ea">Padre_t</a>;
<a name="l00997"></a><a class="code" href="structia_1_1_enlaces.html#a32653e469238c7f7585a235bac3efe8">00997</a>    <span class="keyword">typedef</span> <span class="keyword">typename</span> multimap&lt;Costo_t, const Iterador_t* &gt;::iterator iterator;
<a name="l00998"></a><a class="code" href="structia_1_1_enlaces.html#f3f194e2b9d564ef2f17e7ec90c61a89">00998</a>    <a class="code" href="structia_1_1_grafo.html">Grafo_t</a>&amp; grafo;
<a name="l00999"></a><a class="code" href="structia_1_1_enlaces.html#b204109448e81f85e1a9e5f7599ebd9a">00999</a>    <a class="code" href="structia_1_1_enlaces.html">Enlaces</a>( <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;</a>&amp; g ) : grafo(g) {}
<a name="l01000"></a><a class="code" href="structia_1_1_enlaces.html#64a7653bb3bc604b05bd996beccbd2d0">01000</a>    <span class="keyword">typename</span> Padre_t::iterator begin() { <span class="keywordflow">return</span> Padre_t::begin(); }
<a name="l01001"></a><a class="code" href="structia_1_1_enlaces.html#621de40245d42d1089539f8ff12d5a87">01001</a>    <span class="keyword">typename</span> Padre_t::iterator end() { <span class="keywordflow">return</span> Padre_t::end(); }
<a name="l01002"></a><a class="code" href="structia_1_1_enlaces.html#c94780e73dab77b7eac1b69adc900e32">01002</a>    <span class="keyword">struct </span><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html">Auxiliar_costo_asignable_t</a>;
<a name="l01003"></a>01003    <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html">Auxiliar_costo_asignable_t</a>;
<a name="l01005"></a><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html">01005</a>    <span class="keyword">struct </span><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html">Auxiliar_costo_asignable_t</a> {
<a name="l01006"></a><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html#44c9dc27196e9a2fb5e31dbd4da8f6ec">01006</a>       <span class="keyword">typename</span> Padre_t::iterator par_costo;
<a name="l01007"></a><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html#dde194b655b9a055ae350d45e37bb096">01007</a>       <a class="code" href="structia_1_1_enlaces.html#184c9dd55071c8ca3b2cc99d96a2b2ea">Padre_t</a>&amp; outer;
<a name="l01008"></a><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html#e51e9eb4a687b0ffd98031e2854797c6">01008</a>       <a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html">Auxiliar_costo_asignable_t</a>( <a class="code" href="structia_1_1_enlaces.html">Enlaces</a>&amp; enlaces, <span class="keyword">typename</span> Enlaces::iterator par_costo_ ) : outer(enlaces), par_costo( par_costo_) {}
<a name="l01009"></a><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html#b2ee1a3ab407b96ce5b99ebb4aceeed6">01009</a>       <span class="keywordtype">void</span> operator=( <span class="keyword">const</span> Costo_t&amp; costo ) {
<a name="l01010"></a>01010          <span class="keywordflow">if</span> (par_costo-&gt;first == costo)
<a name="l01011"></a>01011             <span class="keywordflow">return</span>;
<a name="l01012"></a>01012          <span class="keyword">const</span> Iterador_t* iterador_destino = par_costo-&gt;second;
<a name="l01013"></a>01013          outer.erase( par_costo );
<a name="l01014"></a>01014          <span class="keyword">typename</span> Padre_t::value_type nuevo(costo, iterador_destino);
<a name="l01015"></a>01015          outer.insert( nuevo);
<a name="l01016"></a>01016       }
<a name="l01017"></a><a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html#3d4c7500a5580665e3a5fcdbed7a3587">01017</a>       operator Costo_t() {
<a name="l01018"></a>01018          <span class="keywordflow">return</span> par_costo-&gt;first;
<a name="l01019"></a>01019       }
<a name="l01020"></a>01020    };
<a name="l01021"></a><a class="code" href="structia_1_1_enlaces.html#f721f3e17426e626f68f5ced51bac85e">01021</a>    <a class="code" href="structia_1_1_enlaces_1_1_auxiliar__costo__asignable__t.html">Auxiliar_costo_asignable_t</a> operator[]( Nodo_t <span class="keyword">const</span> &amp; destino ){
<a name="l01022"></a>01022       <span class="keyword">typename</span> Grafo_t::iterator it_destino = grafo.find(destino);
<a name="l01023"></a>01023       <span class="keywordflow">if</span> ( it_destino == grafo.end() ) {
<a name="l01024"></a>01024          <span class="keyword">typename</span> Grafo_t::Enlaces_t nuevo(*<span class="keyword">this</span>);
<a name="l01025"></a>01025          <span class="keyword">typename</span> Grafo_t::value_type valor(destino, nuevo );
<a name="l01026"></a>01026          it_destino = (grafo.insert(valor)).first;
<a name="l01027"></a>01027       }
<a name="l01028"></a>01028       Iterador_t* iterador = <span class="keyword">new</span> Iterador_t(*(Iterador_t*)(&amp;it_destino));
<a name="l01029"></a>01029       <span class="comment">//Se usa this-&gt;insert porque Digital Mars esta roto</span>
<a name="l01030"></a>01030       iterator it_buscando;
<a name="l01031"></a>01031       <span class="keywordflow">for</span>( it_buscando = begin(); it_buscando != end(); ++ it_buscando ) {
<a name="l01032"></a>01032          <span class="keyword">const</span> Nodo_t&amp; probando = (*it_buscando-&gt;second)-&gt;first;
<a name="l01033"></a>01033          <span class="keywordflow">if</span> (  ! (probando &lt; destino) &amp;&amp; ! (destino &lt; probando) )
<a name="l01034"></a>01034             <span class="keywordflow">break</span>;
<a name="l01035"></a>01035       }
<a name="l01036"></a>01036       iterator it_modificado;
<a name="l01037"></a>01037       <span class="keywordflow">if</span> ( it_buscando == end() ) {
<a name="l01038"></a>01038          <span class="keyword">typename</span> Enlaces::value_type nuevo( make_pair(Costo_t(), iterador ) );
<a name="l01039"></a>01039          it_modificado = this-&gt;insert( nuevo );
<a name="l01040"></a>01040       }<span class="keywordflow">else</span>
<a name="l01041"></a>01041          it_modificado = it_buscando;
<a name="l01042"></a>01042       Auxiliar_costo_asignable_t resultado(*<span class="keyword">this</span>, it_modificado);<span class="comment">// , iterador );</span>
<a name="l01043"></a>01043       <span class="keywordflow">return</span> resultado;
<a name="l01044"></a>01044    }
<a name="l01045"></a>01045 };
<a name="l01046"></a>01046 
<a name="l01047"></a>01047 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Nodo_t, <span class="keyword">typename</span> Iterador_t, <span class="keyword">typename</span> Costo_t&gt;
<a name="l01048"></a><a class="code" href="structia_1_1_grafo.html#fc5e3c771bcd0200dfbbd7619c361d46">01048</a> <span class="keyword">typename</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::Enlaces_t</a>&amp; <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::operator[]</a>( <span class="keyword">const</span> Nodo_t&amp; origen ) {
<a name="l01049"></a>01049       <span class="comment">// Se usa this-&gt;find para contentar a Digital Mars</span>
<a name="l01050"></a>01050       <span class="keyword">typename</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::iterator</a> it_origen = this-&gt;find( origen );
<a name="l01051"></a>01051       <span class="keywordflow">if</span> ( it_origen == this-&gt;end() ) {
<a name="l01052"></a>01052          <span class="keyword">typename</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::value_type</a> valor(origen, <a class="code" href="structia_1_1_grafo.html#3bc9cd541cbe31b83f70a00f95639456">Enlaces_t</a>(*<span class="keyword">this</span>));
<a name="l01053"></a>01053          it_origen = this-&gt;insert( valor).first;
<a name="l01054"></a>01054       }
<a name="l01055"></a>01055       <span class="keyword">typename</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::value_type</a> nuevo(it_origen-&gt;first, Enlaces_t(*<span class="keyword">this</span>) );
<a name="l01056"></a>01056       <span class="keywordflow">return</span> (*((this-&gt;insert(nuevo)).first)).second; 
<a name="l01057"></a>01057 }
<a name="l01058"></a>01058 
<a name="l01059"></a>01059 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Nodo_t, <span class="keyword">typename</span> Iterador_t, <span class="keyword">typename</span> Costo_t &gt;
<a name="l01060"></a><a class="code" href="namespaceia.html#6b177a5d96ecaa77f5e626692488060d">01060</a> vector&lt;Iterador_t&gt; <a class="code" href="namespaceia.html#6b177a5d96ecaa77f5e626692488060d">vecino_mas_proximo</a>( <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;</a>&amp; grafo, <span class="keyword">typename</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;::iterator</a>&amp; it_nodo ) {
<a name="l01061"></a>01061 }
<a name="l01062"></a>01062 
<a name="l01063"></a>01063 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Nodo_t, <span class="keyword">typename</span> Iterador_t, <span class="keyword">typename</span> Costo_t &gt;
<a name="l01064"></a><a class="code" href="namespaceia.html#2feea471b5b3317571ae34dc29d00498">01064</a> vector&lt;Iterador_t&gt; <a class="code" href="namespaceia.html#6b177a5d96ecaa77f5e626692488060d">vecino_mas_proximo</a>( <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;</a>&amp; grafo, <span class="keyword">const</span> Nodo_t&amp; nodo ) {
<a name="l01065"></a>01065    <span class="keyword">typedef</span> <a class="code" href="structia_1_1_grafo.html">Grafo&lt;Nodo_t, Iterador_t, Costo_t&gt;</a> Grafo_t;
<a name="l01066"></a>01066    <span class="keyword">typename</span> Grafo_t::iterator it_nodo = grafo.find(nodo);
<a name="l01067"></a>01067    <span class="keywordflow">if</span> ( it_nodo == grafo.end() )
<a name="l01068"></a>01068       ;
<a name="l01069"></a>01069    <span class="keywordflow">if</span> ( it_nodo-&gt;first.es_meta() )
<a name="l01070"></a>01070       ;
<a name="l01071"></a>01071    <span class="keyword">typename</span> Grafo_t::Enlaces_t::iterator it_enlace;
<a name="l01072"></a>01072    <span class="keywordflow">for</span>( it_enlace = it_nodo-&gt;second.begin(); it_enlace != it_nodo-&gt;second.end(); ++it_enlace) {
<a name="l01073"></a>01073       vecino_mas_proximo&lt;Nodo_t, Iterador_t, Costo_t&gt;(grafo, *it_enlace-&gt;second );
<a name="l01074"></a>01074    }
<a name="l01075"></a>01075 }
<a name="l01076"></a>01076 
<a name="l01077"></a>01077 } <span class="comment">// fin del namespace ia</span>
<a name="l01078"></a>01078 
<a name="l01079"></a>01079 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generado el Tue Aug 22 12:21:37 2006 para IA Ciega 0.9 por&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6-NO </small></address>
</body>
</html>
